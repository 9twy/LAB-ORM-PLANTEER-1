{% extends 'main/base.html' %}
{% block content %}



<div class="w-11/12  flex flex-col  " >
    <!-- style="width: 90%; align-self: self-start; display: flex; flex-direction: column; " -->

     <div class="flex flex-row justify-around mt-20 gap-96" >
    <div class="  ">
        <!-- style=" margin-left: 5.8rem; margin-top: 2rem;" -->
        <h2 >Plants</h2>
        <!-- style="margin: 0;" -->
    <p >Learn more about plants</p >
    </div>
    <div>
        <form action="{% url 'main:all_plant_view' %}" method="post">  <select name="edible" id="edible">
            <option value="all">All</option>
            <option value="true">Edible</option>
            <option value="false">Not edible</option>
        </select>
    </form>
    <script>
        document.getElementById("edible").addEventListener("change", function() {
            var selectedValue = this.value;
            window.location.href = "{% url 'main:all_plant_view' %}?edible=" + selectedValue;
    
            // Persist selection using session storage (optional)
            sessionStorage.setItem("selectedEdible", selectedValue);
        });
    
        // Restore selection on page load (optional)
        var storedValue = sessionStorage.getItem("selectedEdible");
        if (storedValue) {
            document.getElementById("edible").value = storedValue;
        }
    </script>
    </div>
    </div>
    <div class="flex flex-row gap-x-10  gap-y-10 mt-16 ml-52 w-5/6 flex-wrap " >
        <!-- style="display: flex; flex-direction: row; column-gap: 10rem; flex-wrap: wrap; " -->
       {% for plant in plants%}
        <div class="card-item self-start justify-self-start " >
            <!-- style="margin-left: 5.8rem;" -->
            <img src="{{plant.image.url}}" alt="fruit-image" class="w-80 rounded-md">
            <!-- style="width: 300px; border-radius: 5px;" -->
            <div class="flex flex-row justify-between">
                <div>
                   <a href="{% url 'main:plant_detail_view' plant.id %}"> <p class="title font-bold hover:text-red-700">{{plant.name}}</p></a>
                <p class="subtitle">{{plant.about|truncatechars:40 }}</p>
                <p class="category ">{{plant.category}}</p>
                </div>
                <div> 
                    <a href="{% url 'main:update_plant_view' plant.id %}"><i class="fa-solid fa-pen-to-square"></i></a>
                    <a href="{% url 'main:delete_plant_view'  plant.id %}"><i class="fa-solid fa-trash-can text-red-600"></i> </a>
                </div>

            </div>
        </div>
        {% endfor %}



        

     
        <!-- end of the container -->
    </div>

</div>
{% endblock %}